# Rest API 기반 쇼핑몰 프로젝트입니다.
테스트 코드를 기반으로 로직을 검증하며, 
PostMan을 통해서 실제 URL에서 어떤 JSON 값을 리턴하는 지 테스트했습니다.

## 기술 스택
Language | Java 17

Framework | Spring Boot 3 / Spring Data JPA / Spring Security

Database |  MYSQL / QueryDSL

Test | JUnit / Postman

Build / Gradle

Docs / Swagger

## 기능 목록
<details>
<summary><strong>회원 기능</strong></summary>

- 회원가입  
   - 사용자는 이메일, 비밀번호, 이름, 전화번호 등의 정보를 입력하여 회원 가입을 진행합니다.  
   - 회원 가입 시, 비밀번호는 암호화하여 저장됩니다.

- 로그인  
   - 사용자는 이메일과 비밀번호를 입력하여 로그인할 수 있습니다.  
   - 로그인 성공 시 JWT 토큰을 발급합니다.

- 회원 탈퇴  
   - 회원 탈퇴 시 실제 데이터 삭제 대신, MemberState(Enum)을 변경하여 Soft delete 처리합니다.  
   - 탈퇴한 회원은 로그인 및 서비스 이용이 불가능하며, 데이터는 보존됩니다. (추후 삭제 정책에 따라 완전 삭제 가능)

- 회원 상태 변경  
   - 관리자는 특정 회원의 상태(활성, 휴면, 탈퇴 등)를 변경할 수 있습니다.

</details>

</details>

<details>
<summary><strong>상품 기능</strong></summary>
   
- 상품 등록 / 수정 / 삭제  
   - 상품 정보를 등록하거나 수정, 삭제할 수 있습니다.

- 상품 검색  
   - 상품명 기반 검색 기능을 제공합니다.  
   - 가격대, 카테고리, 평점 필터링을 지원합니다.

- 상품 조회  
   - 전체 상품 목록을 페이징 방식으로 조회할 수 있습니다.

- 카테고리 등록  
   - 관리자가 상품 분류를 위한 카테고리를 생성할 수 있습니다.  
   - 카테고리는 계층 구조를 가질 수 있습니다.

- 전체 카테고리 조회  
   - 사용자 및 관리자가 전체 카테고리 목록을 조회할 수 있습니다.  

</details>

<details>
<summary><strong>주문 기능</strong></summary>

- 주문 생성  
   - 사용자는 상품을 선택하여 주문을 생성할 수 있습니다.  
   - 주문은 쿠폰, 회원 포인트, 상품 할인 등 할인가를 적용해서 생성할 수 있습니다.

- 주문 상태 변경  
   - 주문 생성 후, 관리자는 주문 상태(결제 완료, 배송 중, 배송 완료 등)를 변경할 수 있습니다.

- 주문 취소  
   - 사용자는 주문을 취소할 수 있습니다.

- 하나의 주문 상품 정보 조회  
   - 특정 주문에 대한 상세 정보를 조회할 수 있습니다. (상품명, 수량, 가격 등)

- 한 사람의 전체 주문 조회  
   - 로그인한 사용자는 본인의 모든 주문 내역을 조회할 수 있습니다.

- 전체 주문 조회 (관리자)  
   - 관리자가 전체 회원의 주문 내역을 조회할 수 있습니다.

</details>

<details><summary><strong>장바구니 기능</strong></summary>
   
- 장바구니에 상품 추가  
   - 사용자는 원하는 상품을 장바구니에 담을 수 있습니다.  
   - 상품 옵션과 수량을 함께 선택할 수 있습니다.

- 장바구니 상품 수량 수정  
   - 장바구니에 담긴 상품의 수량을 변경할 수 있습니다.

- 장바구니 상품 삭제  
   - 사용자는 장바구니에 담긴 상품을 삭제할 수 있습니다.

- 장바구니 목록 조회  
   - 현재 장바구니에 담긴 모든 상품을 조회할 수 있습니다.

- 장바구니 비우기  
   - 사용자는 장바구니에 담긴 모든 상품을 한 번에 삭제할 수 있습니다.
</details>


<details>
<summary><strong>상품 리뷰 기능</strong></summary>

- 상품 리뷰 작성  
   - 사용자는 상품에 대해 리뷰를 작성할 수 있습니다.  
   - 리뷰는 별점(평점)과 텍스트(내용)를 함께 작성할 수 있습니다.

- 상품 리뷰 수정  
   - 작성한 리뷰를 수정할 수 있습니다.  
   - 별점과 텍스트 내용을 모두 수정할 수 있습니다.

- 상품 리뷰 삭제  
   - 작성한 리뷰를 삭제할 수 있습니다.  

- 상품 리뷰 조회  
   - 상품별로 작성된 모든 리뷰를 조회할 수 있습니다.  
   - 리뷰 목록은 최신순, 평점순 등으로 정렬할 수 있습니다.

</details>

<details>
<summary><strong>쿠폰 기능</strong></summary>

- 쿠폰 발급  
   - 관리자는 쿠폰을 생성하고, 사용자가 직접 쿠폰을 발급받을 수 있습니다.
   - 쿠폰은 고정 할인 쿠폰, % 할인 쿠폰을 정책별로 관리합니다.

- 쿠폰 사용  
   - 주문 시 보유한 쿠폰을 선택하여 할인 혜택을 적용할 수 있습니다.  
   - 쿠폰 조건(최소 주문 금액, 유효기간 등)에 따라 사용 여부가 결정됩니다.

- 쿠폰 조회  
   - 사용자는 자신이 보유한 쿠폰 목록을 조회할 수 있습니다.  
   - 쿠폰 사용 여부(미사용, 사용 완료, 만료)도 함께 표시됩니다.

</details>


## 비기능

<details><summary><strong>비기능 (Non-Functional Features)</strong></summary>

- 공통 응답 포맷 적용 (ResponseEntity + ApiResponse)  
   - 모든 API는 `code`, `message`, `data`를 포함하는 일관된 응답 구조를 반환합니다.  
   - 클라이언트는 일관된 구조의 응답을 받아 통신할 수 있습니다.

- 체계적인 예외 처리 (Error 인터페이스 + Enum 코드 세분화)  
   - 비즈니스 예외를 구분하여 관리하는 Enum 클래스를 정의하여 예외를 세분화합니다.  
   - 클라이언트는 에러 코드와 메시지를 통해 정확한 오류 원인을 확인할 수 있습니다.

- Spring Security + JWT를 이용한 인증/인가 구현  
   - 로그인 시 Access Token, Refresh Token을 발급하고, 토큰을 통해 인증/인가를 수행합니다.  

- 스케줄러(Scheduler)를 통한 자동 작업 실행  
   - 특정 시간대에 동작하는 서비스 코드를 스케줄링하여 실행합니다.  
   - 예를 들어 쿠폰 만료 처리 및 리뷰 시스템의 정합성 보장을 위해서 실행됩니다.

- 데이터베이스 락을 이용한 동시성 제어  
   - 특정 기능에서 DB Level에서 비관적 락(Pessimistic Lock 등)을 적용합니다.  
   - 재고 초과 주문이나 중복 주문을 방지합니다.

- QueryDSL을 이용한 동적 검색 쿼리 작성  
   - 검색 조건(상품명, 가격, 카테고리 등)에 따라 동적으로 SQL 쿼리를 생성합니다.  
   - JPA Native Query의 가독성이 떨어진다고 판단하여 QueryDSL을 선택했습니다.

- MapStruct를 통한 DTO ↔ Entity 매핑 자동화  
   - DTO와 Entity 간의 매핑을 MapStruct 라이브러리로 관리합니다.
   - DTO를 이용하여 통신하여 순환 참조를 방지합니다.

- 테스트 코드 작성  
   - 테스트 코드를 작성하여 로직을 검증합니다.

</details>


## EER 다이어그램
![eer](https://github.com/user-attachments/assets/607f5d11-6356-44b3-8f71-1c52d53bead7)

## [API 명세서](https://kimwanho23.github.io/cofshop)
